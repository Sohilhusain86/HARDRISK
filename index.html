<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, viewport-fit=cover" />
    <meta name="description" content="Zikr-o-Nazar: The most advanced Islamic Digital Library for Naats and PDF Books." />
    <meta name="theme-color" id="themeColor" content="#064e3b" />
    
    <meta property="og:title" content="Zikr-o-Nazar | Premium Islamic Library" />
    <meta property="og:description" content="Listen to Naats and Read Islamic Books with professional UI." />
    <meta property="og:type" content="website" />
    
    <title>Zikr-o-Nazar</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Nastaliq+Urdu:wght@400;700&family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap" rel="stylesheet" />

    <style>
        :root {
            --p-h: 162; --p-s: 84%; --p-l: 14%;
            --primary: hsl(var(--p-h), var(--p-s), var(--p-l));
            --primary-light: hsl(var(--p-h), var(--p-s), 25%);
            --accent: #f59e0b;
            --bg-base: #f8fafc;
            --bg-card: #ffffff;
            --text-main: #1e293b;
            --text-muted: #64748b;
            --glass: rgba(255, 255, 255, 0.8);
            --border: rgba(0, 0, 0, 0.08);
            --shadow: 0 10px 30px -10px rgba(0,0,0,0.1);
            --radius: 16px;
            --transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
        }

        [data-theme="dark"] {
            --bg-base: #0f172a;
            --bg-card: #1e293b;
            --text-main: #f1f5f9;
            --text-muted: #94a3b8;
            --glass: rgba(15, 23, 42, 0.8);
            --border: rgba(255, 255, 255, 0.1);
            --primary: #10b981;
        }

        @media (prefers-reduced-motion: reduce) {
            * { animation-duration: 0.01ms !important; transition-duration: 0.01ms !important; }
        }

        * { box-sizing: border-box; outline-offset: 3px; }
        
        body {
            margin: 0; padding: 0; font-family: 'Plus Jakarta Sans', 'Noto Nastaliq Urdu', sans-serif;
            background: var(--bg-base); color: var(--text-main);
            direction: rtl; overflow-x: hidden; min-height: 100vh;
            transition: background 0.3s ease;
        }

        .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); border: 0; }

        /* --- UI COMPONENTS --- */
        .sticky-nav {
            position: sticky; top: 0; z-index: 1100;
            background: var(--glass); backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--border); padding: 0.75rem 1rem;
        }

        .nav-wrapper {
            max-width: 1200px; margin: 0 auto;
            display: flex; justify-content: space-between; align-items: center;
        }

        .brand { display: flex; align-items: center; gap: 10px; font-weight: 800; font-size: 1.5rem; color: var(--primary); text-decoration: none; }
        
        .btn-circle {
            width: 40px; height: 40px; border-radius: 50%; border: 1px solid var(--border);
            background: var(--bg-card); color: var(--text-main); cursor: pointer;
            display: flex; align-items: center; justify-content: center; transition: var(--transition);
        }

        .main-hero {
            padding: 4rem 1rem 2rem; text-align: center;
            background: radial-gradient(circle at top right, var(--primary-light), transparent);
        }

        .search-container {
            max-width: 600px; margin: -2rem auto 2rem; position: relative; padding: 0 1rem;
        }

        .search-input {
            width: 100%; padding: 1.2rem 3rem 1.2rem 1.5rem;
            border-radius: 50px; border: 1px solid var(--border);
            background: var(--bg-card); color: var(--text-main);
            box-shadow: var(--shadow); font-size: 1rem; transition: var(--transition);
        }

        .search-input:focus { border-color: var(--primary); transform: translateY(-3px); box-shadow: 0 20px 40px -15px rgba(0,0,0,0.15); }

        .filter-tabs {
            display: flex; justify-content: center; gap: 0.5rem; margin-bottom: 2rem; flex-wrap: wrap;
        }

        .tab {
            padding: 0.6rem 1.5rem; border-radius: 50px; border: 1px solid var(--border);
            background: var(--bg-card); cursor: pointer; font-weight: 600; transition: var(--transition);
        }

        .tab.active { background: var(--primary); color: #fff; border-color: var(--primary); }

        /* --- GRID & CARDS --- */
        .content-grid {
            max-width: 1200px; margin: 0 auto; padding: 0 1rem 10rem;
            display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem;
        }

        .card {
            background: var(--bg-card); border-radius: var(--radius); border: 1px solid var(--border);
            padding: 1.5rem; position: relative; transition: var(--transition);
            display: flex; flex-direction: column; gap: 1rem; contain: content;
        }

        .card:hover { transform: translateY(-10px); box-shadow: var(--shadow); }

        .card-meta { display: flex; justify-content: space-between; align-items: center; }
        .badge { font-size: 0.7rem; padding: 0.2rem 0.6rem; border-radius: 4px; font-weight: 700; text-transform: uppercase; }
        .badge-naat { background: #dcfce7; color: #166534; }
        .badge-book { background: #dbeafe; color: #1e40af; }

        .action-group { display: flex; gap: 0.5rem; margin-top: auto; }
        .btn-action {
            flex: 1; padding: 0.8rem; border-radius: 12px; border: none;
            font-weight: 700; cursor: pointer; transition: var(--transition);
            display: flex; align-items: center; justify-content: center; gap: 5px;
        }

        .btn-p { background: var(--primary); color: #fff; }
        .btn-s { background: var(--bg-base); color: var(--text-main); border: 1px solid var(--border); }

        /* --- AUDIO PLAYER BAR --- */
        .player-bar {
            position: fixed; bottom: 0; left: 0; right: 0;
            background: var(--glass); backdrop-filter: blur(20px);
            border-top: 1px solid var(--border); padding: 1rem;
            transform: translateY(100%); transition: transform 0.4s ease;
            z-index: 2000;
        }

        .player-bar.active { transform: translateY(0); }

        .player-ui {
            max-width: 1000px; margin: 0 auto;
            display: grid; grid-template-columns: auto 1fr auto; align-items: center; gap: 1.5rem;
        }

        .progress-container { width: 100%; height: 6px; background: var(--border); border-radius: 10px; cursor: pointer; position: relative; }
        .progress-bar { height: 100%; background: var(--primary); border-radius: 10px; width: 0%; transition: width 0.1s linear; }

        /* --- TOASTS --- */
        #toastContainer { position: fixed; top: 1rem; left: 1rem; z-index: 3000; display: flex; flex-direction: column; gap: 0.5rem; }
        .toast {
            background: var(--bg-card); color: var(--text-main); border: 1px solid var(--border);
            padding: 1rem 1.5rem; border-radius: 12px; box-shadow: var(--shadow);
            animation: slideIn 0.3s ease forwards;
        }

        @keyframes slideIn { from { transform: translateX(-100%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }

        /* --- RESPONSIVE --- */
        @media (max-width: 768px) {
            .player-ui { grid-template-columns: 1fr; gap: 0.5rem; text-align: center; }
            .content-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <div id="toastContainer" role="alert" aria-live="polite"></div>

    <nav class="sticky-nav">
        <div class="nav-wrapper">
            <a href="#" class="brand">
                <span>ğŸ•Œ</span>
                <span>Zikr-o-Nazar</span>
            </a>
            <div style="display: flex; gap: 10px;">
                <button id="themeToggle" class="btn-circle" title="Toggle Dark Mode" aria-label="Dark Mode">ğŸŒ“</button>
            </div>
        </div>
    </nav>

    <header class="main-hero">
        <h1 style="font-weight: 800; font-size: clamp(2rem, 5vw, 3.5rem); margin: 0;">Ø°Ú©Ø± Ùˆ Ù†Ø¸Ø±</h1>
        <p style="color: var(--text-muted); font-size: 1.2rem;">Ø§Ø³Ù„Ø§Ù…ÛŒ Ù†Ø¹ØªÛŒÚº Ø§ÙˆØ± Ù…Ø³ØªÙ†Ø¯ Ú©ØªØ¨ Ú©Ø§ Ø¬Ø§Ù…Ø¹ Ù…Ø±Ú©Ø²</p>
    </header>

    <section class="search-container">
        <input type="text" id="mainSearch" class="search-input" placeholder="Ù†Ø¹ØªØŒ Ù†Ø¹Øª Ø®ÙˆØ§Úº ÛŒØ§ Ú©ØªØ§Ø¨ ØªÙ„Ø§Ø´ Ú©Ø±ÛŒÚº..." aria-label="Search content">
        <div class="filter-tabs" id="filterTabs" style="margin-top: 2rem;">
            <button class="tab active" data-filter="all">Ø³Ø¨ Ø¯ÛŒÚ©Ú¾ÛŒÚº</button>
            <button class="tab" data-filter="naat">Ù†Ø¹ØªÛŒÚº</button>
            <button class="tab" data-filter="book">Ú©ØªØ¨</button>
        </div>
    </section>

    <main id="contentGrid" class="content-grid">
        </main>

    <footer class="player-bar" id="playerBar">
        <div class="player-ui">
            <div id="trackInfo">
                <div id="trackTitle" style="font-weight: 700;">--</div>
                <div id="trackArtist" style="font-size: 0.8rem; color: var(--text-muted);">--</div>
            </div>
            
            <div style="display: flex; flex-direction: column; gap: 5px;">
                <div class="progress-container" id="progressArea">
                    <div class="progress-bar" id="progressBar"></div>
                </div>
                <div style="display: flex; justify-content: space-between; font-size: 0.7rem; font-family: monospace;">
                    <span id="currTime">00:00</span>
                    <span id="durTime">00:00</span>
                </div>
            </div>

            <div style="display: flex; align-items: center; gap: 1rem;">
                <select id="speedCtrl" style="background: none; border: 1px solid var(--border); color: var(--text-main); border-radius: 4px;">
                    <option value="1">1.0x</option>
                    <option value="1.25">1.25x</option>
                    <option value="1.5">1.5x</option>
                    <option value="2">2.0x</option>
                </select>
                <button id="mainPlayBtn" class="btn-circle" style="background: var(--primary); color: #fff; border: none;">â–¶</button>
            </div>
        </div>
    </footer>

    <audio id="audioEngine" preload="none"></audio>

    <script>
        // --- CORE CONFIG & STATE ---
        const CONFIG = {
            brand: "Zikr-o-Nazar",
            version: "2.1.0",
            basePdf: "https://github.com/Sohilhusain86/HARDRISK/raw/main/",
            naats: [
                { id: 1, title: 'Ú©ÙˆØ¦ÛŒ Ú¯Ù„ Ø¨Ø§Ù‚ÛŒ Ø±ÛÛ’ Ú¯Ø§', artist: 'Ù†Ø§Ù…Ø¹Ù„ÙˆÙ…', src: 'https://github.com/Sohilhusain86/HARDRISK/raw/main/Koi%20Gul%20Baqi%20Rahega%20%5BSlowed%20_%20Reverb%5D%20Beautiful%20Naat%20__%20_lofinaatscreation(MP3_320K).mp3' },
                { id: 2, title: 'Ú©Ù„Ù…Ø§Øª Ù…Ù…ØªØ§Ø² Ù‚Ø§Ø¯Ø±ÛŒ', artist: 'Ù…Ù…ØªØ§Ø² Ù‚Ø§Ø¯Ø±ÛŒ', src: 'https://github.com/Sohilhusain86/HARDRISK/raw/main/Kalam%20Mumtaz%20Qadri%20.%20Full%20janaza%20HD%20video(MP3_320K).mp3' },
                { id: 3, title: 'ÛÙˆ Ú©Ø±Ù… Ø³Ø±Ú©Ø§Ø± Ø§Ø¨ ØªÙˆ', artist: 'Ø§ÙˆÙˆÛŒØ³ Ø±Ø¶Ø§ Ù‚Ø§Ø¯Ø±ÛŒ', src: 'https://github.com/Sohilhusain86/HARDRISK/raw/main/Ho%20Karam%20Sarkar%20Abto%20Owais%20Raza%20Qadri%202019(MP3_160K).mp3' },
                { id: 4, title: 'Ù¾ÛÙ†Ú†Ùˆ Ø¯Ø± Ø³Ø±Ú©Ø§Ø±', artist: 'ØµØ§Ø¨Ø± Ø±Ø¶Ø§ Ø§Ø²ÛØ±ÛŒ', src: 'https://github.com/Sohilhusain86/HARDRISK/raw/main/pohchu%20dare%20sarkar_sabir%20raza%20azhari%20manqabat%20in%20Surat_shorts_video_(MP3_160K).mp3' },
                { id: 5, title: 'Ø¯Ø±ÙˆØ¯ Ù¾Ø§Ú©', artist: 'ØµØ§Ø¨Ø± Ø±Ø¶Ø§ Ø§Ø²ÛØ±ÛŒ', src: 'https://github.com/Sohilhusain86/HARDRISK/raw/main/Durood%20e%20Paak%20__%20Sabir%20Raza%20Azhari_shorts_video_(MP3_160K).mp3' }
            ],
            books: [
                { id: 101, title: 'Ù…ÙˆÙ…Ù† Ú©ÛŒ Ù†Ù…Ø§Ø² (Ø§Ø±Ø¯Ùˆ)', info: 'Ù†Ù…Ø§Ø² Ú©Ø§ Ù…Ú©Ù…Ù„ Ø·Ø±ÛŒÙ‚Û', src: 'Momin-ki-Namaz-Urdu.pdf' },
                { id: 102, title: 'Ú©Ù…Ø§Ù„Ø§Øª Ù…ØµØ·ÙÛŒÙ°', info: 'Ø³ÛŒØ±Øª Ø§Ù„Ù†Ø¨ÛŒ ï·º', src: 'Kamalat%20e%20Mustafa.pdf' },
                { id: 103, title: 'Ø¬ÛÙ†Ù… Ù…ÛŒÚº Ù„Û’ Ø¬Ø§Ù†Û’ ÙˆØ§Ù„Û’ Ø§Ø¹Ù…Ø§Ù„', info: 'Ø§ØµÙ„Ø§Ø­ÛŒ Ú©ØªØ§Ø¨', src: 'jahanam-main-lay-janay-walay-amaal-jild-2%20(1).pdf' }
            ]
        };

        const state = {
            currentFilter: 'all',
            searchTerm: '',
            activeTrack: null,
            isPlaying: false
        };

        // --- UTILS ---
        const $ = (id) => document.getElementById(id);
        const formatTime = (s) => {
            const min = Math.floor(s / 60);
            const sec = Math.floor(s % 60);
            return `${min.toString().padStart(2, '0')}:${sec.toString().padStart(2, '0')}`;
        };

        function showToast(msg) {
            const t = document.createElement('div');
            t.className = 'toast';
            t.innerText = msg;
            $('toastContainer').appendChild(t);
            setTimeout(() => t.remove(), 3000);
        }

        // --- AUDIO ENGINE ---
        const audio = $('audioEngine');
        const playBtn = $('mainPlayBtn');

        function togglePlay() {
            if (audio.paused) {
                audio.play().catch(e => showToast("Error playing audio"));
                playBtn.innerText = 'â¸';
            } else {
                audio.pause();
                playBtn.innerText = 'â–¶';
            }
        }

        function playTrack(id) {
            const track = CONFIG.naats.find(n => n.id === id);
            if (!track) return;

            if (state.activeTrack?.id === id) {
                togglePlay();
                return;
            }

            state.activeTrack = track;
            audio.src = track.src;
            audio.play();
            
            $('playerBar').classList.add('active');
            $('trackTitle').innerText = track.title;
            $('trackArtist').innerText = track.artist;
            playBtn.innerText = 'â¸';

            if ('mediaSession' in navigator) {
                navigator.mediaSession.metadata = new MediaMetadata({
                    title: track.title,
                    artist: track.artist,
                    album: CONFIG.brand
                });
            }
        }

        audio.ontimeupdate = () => {
            const per = (audio.currentTime / audio.duration) * 100;
            $('progressBar').style.width = per + '%';
            $('currTime').innerText = formatTime(audio.currentTime);
            $('durTime').innerText = formatTime(audio.duration || 0);
        };

        $('progressArea').onclick = (e) => {
            const rect = $('progressArea').getBoundingClientRect();
            const pos = (e.clientX - rect.left) / rect.width;
            audio.currentTime = pos * audio.duration;
        };

        $('speedCtrl').onchange = (e) => audio.playbackRate = e.target.value;
        playBtn.onclick = togglePlay;

        // --- SEARCH & RENDER ---
        function render() {
            const grid = $('contentGrid');
            grid.innerHTML = '';

            const filteredNaats = (state.currentFilter === 'all' || state.currentFilter === 'naat') 
                ? CONFIG.naats.filter(n => n.title.includes(state.searchTerm)) : [];
            
            const filteredBooks = (state.currentFilter === 'all' || state.currentFilter === 'book') 
                ? CONFIG.books.filter(b => b.title.includes(state.searchTerm)) : [];

            if (!filteredNaats.length && !filteredBooks.length) {
                grid.innerHTML = `<div style="grid-column: 1/-1; text-align:center; padding: 4rem;">Ù†ØªÛŒØ¬Û Ù†ÛÛŒÚº Ù…Ù„Ø§</div>`;
                return;
            }

            filteredNaats.forEach(n => {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <div class="card-meta"><span class="badge badge-naat">Audio Naat</span></div>
                    <h3 style="margin:0">${n.title}</h3>
                    <p style="font-size:0.9rem; color:var(--text-muted)">${n.artist}</p>
                    <div class="action-group">
                        <button class="btn-action btn-p" onclick="playTrack(${n.id})">ğŸ§ Ú†Ù„Ø§Ø¦ÛŒÚº</button>
                        <a href="${n.src}" download class="btn-action btn-s">ğŸ“¥</a>
                    </div>
                `;
                grid.appendChild(card);
            });

            filteredBooks.forEach(b => {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <div class="card-meta"><span class="badge badge-book">PDF Book</span></div>
                    <h3 style="margin:0">${b.title}</h3>
                    <p style="font-size:0.8rem; color:var(--text-muted)">${b.info}</p>
                    <div class="action-group">
                        <a href="${CONFIG.basePdf + b.src}" target="_blank" class="btn-action btn-p">ğŸ“– Ù…Ø·Ø§Ù„Ø¹Û Ú©Ø±ÛŒÚº</a>
                        <a href="${CONFIG.basePdf + b.src}" download class="btn-action btn-s">ğŸ“¥</a>
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        // --- DEBOUNCED SEARCH ---
        let debounceTimer;
        $('mainSearch').oninput = (e) => {
            clearTimeout(debounceTimer);
            debounceTimer = setTimeout(() => {
                state.searchTerm = e.target.value;
                render();
            }, 300);
        };

        $('filterTabs').onclick = (e) => {
            if (!e.target.classList.contains('tab')) return;
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            e.target.classList.add('active');
            state.currentFilter = e.target.dataset.filter;
            render();
        };

        // --- THEME ---
        const themeBtn = $('themeToggle');
        themeBtn.onclick = () => {
            const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
            const next = isDark ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', next);
            localStorage.setItem('zn_theme', next);
            $('themeColor').setAttribute('content', next === 'dark' ? '#0f172a' : '#064e3b');
        };

        // Initialization
        const savedTheme = localStorage.getItem('zn_theme') || 'light';
        document.documentElement.setAttribute('data-theme', savedTheme);
        render();

        // PWA Placeholder for production logic
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                // Production Service Worker Registration would go here
            });
        }

        window.addEventListener('offline', () => showToast("Ø§Ù†Ù¹Ø±Ù†ÛŒÙ¹ Ú©Ù†Ú©Ø´Ù† Ù…Ù†Ù‚Ø·Ø¹ ÛÙˆ Ú¯ÛŒØ§ ÛÛ’"));
        window.addEventListener('online', () => showToast("Ø¢Ù¾ Ø§Ø¨ Ø¢Ù† Ù„Ø§Ø¦Ù† ÛÛŒÚº"));
    </script>
</body>
</html>
